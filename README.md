# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build

```

## Документация

## API
Класс API - базовы класс апи который выполняет post и get запросы на сервер и принимает ответ.
Класс UserApi - отправляет заказ пользователя на сервер.
Класс MarketApi - отправляет запрос на загрузку списка продуктов или на загрузку одного продукта по его id.

----------------------------------------------------------------------------------------------------------------------------------------

## Presenter

Класс который обеспечивает связь и взаимодействие между моделью и view.
Загрузку карточек.
Вызов хэндлеров.
Отправку заказа.

----------------------------------------------------------------------------------------------------------------------------------------

## Модель

----------------------------------------------------------------------------------------------------------------------------------------

### Product 

interface IProduct {
    id: string;
    description: string;
    image: string;
    title: string;
    category: string;
    price: number | null;

    toProductDefault(): IProductDefault;
    toProductFull(): IProductFull;
    toProductShort(): IProductShort;
}

Является моделью тех данных которые приходят с сервера, так же выступает в ролли мапера данных.

----------------------------------------------------------------------------------------------------------------------------------------

### ProductList
модель данных которая загружает и хранит товары в виде IProduct[]. Имеет метод getProductById(), который позволяет получить товара из массива по id.

----------------------------------------------------------------------------------------------------------------------------------------

### Cart 

interface ICart extends EventEmitter {
    add(product: IProduct): void;
    remove(productID: string): void;
    length(): string;
    getCart(): Set<IProduct>;
}

Хранит в виде сета список товаров которые находятся в корзине покупателя. 
Позволяет добавлять add() и удалять remove() товары из сета по их id, а так же получать всю корзину getCart().

----------------------------------------------------------------------------------------------------------------------------------------

### Order

interface IOrder {
    payment: string;
    email: string;
    phone: string;
    address: string;
    total: number;
    items: string[];
}

Хранит полученные от пользователя данные нужные для заказа.

----------------------------------------------------------------------------------------------------------------------------------------

### OrderConfirmed

export interface IOrderConfirmed {
    id: string;
    total: number;
}

Класс для получения ответа от сервера в случае удачного размещения заказа. Хранит id заказа который присвоил сервер, а так же сумму товаров заказа покупателя.

----------------------------------------------------------------------------------------------------------------------------------------

## View

----------------------------------------------------------------------------------------------------------------------------------------

interface IView<T> {
    render(data: T): HTMLElement;
}

Базовый интерфейс который наследуют все View проекта. Является абстракцией которая показывает что любая View имеет метод render(),
который в качестве аргументов должен принимать какие-то данные и возвращать готовый элемент разметки.

ListView<T> 

Данный класс служит для создания списков элементов по заданному шаблону. На вход принимает Класс на основе которого будут создаваться элементы списка, шаблон на базе которого они будут рендерится, а так же родительский элемент куда будет вставлен список из новых готовых элементов.

----------------------------------------------------------------------------------------------------------------------------------------

## BasketView

Класс отвечает за создание разметки корзины. На вход получает шаблон корзины, а так же шаблон списка элементов корзины.
В функции render(products: Set<IProduct>, deleteProductEvent: Function) принимает сет продуктов, а так же функцию для удаления продукта из корзины.

Имеет два метода 
_renderProductList(data: Set<IProduct>, deleteProductEvent: Function) - рендерит список продуктов, вешает слушатель для удаления карточки из корзины, заполняет индексы товаров в корзине.

_setBasketTotal(products: Set<IProduct>) заполняет поле общей стоимости корзины.

----------------------------------------------------------------------------------------------------------------------------------------

### CardViewShort

Рендерит карточку которая необходима для отображения в корзине. 
Является наследником EventEmitter.
Получает в конструкторе шаблон, клонирует его.
С помощью публичного метода render(data: T): HTMLElement заполняет элемент данными полученными из данного метода.

----------------------------------------------------------------------------------------------------------------------------------------

### CardView

Рендерит карточку для главной страницы, является наследником CardViewShort и расширяет его функционал. Добавляются методы установки категории и изображения. Список доступных категорий хранится как константа в виде Map<string, string>

----------------------------------------------------------------------------------------------------------------------------------------

### CardViewFull

Рендерит расширенную карточку товара которая отображается в модальном окне. 
Я вляется наследником CardView и расширяет его функционал.
Добавляется метод для установки описания товара, а так же установки слушателя на кнопку "В корзину"

----------------------------------------------------------------------------------------------------------------------------------------

# Form

export interface IForm {
    clearValue(): void;
    setButtonText(data: string): void;
    render(): HTMLFormElement;
}

Отвечает за отрисовку форм, а так же за добавление слушателей на элементах формы. Имеет наследника AddressForm который расширяет функционал
 в виде двух кнопок и слушателей для них.

----------------------------------------------------------------------------------------------------------------------------------------


----------------------------------------------------------------------------------------------------------------------------------------


----------------------------------------------------------------------------------------------------------------------------------------


----------------------------------------------------------------------------------------------------------------------------------------